fileFormatVersion: 2
guid: 0d8f09f3711dd9d45a474c728dace9b8
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: 11500000, guid: 22604dd76f55453daccee3ed9e7b94b5, type: 3}
  SerializedAsset: '{"IsCompiled":true,"CompilerVersion":"2.0.63","ReferencedSpecifiers":["@assets/Experience/GeniesScripts/GameManager","@assets/Experience/GeniesScripts/TimeManager","@assets/Experience/GeniesScripts/DanceUpManager"],"Source":"\"use
    strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst
    UnityEngine_1 = require(\"UnityEngine\");\nconst GameManager_1 = require(\"@assets/Experience/GeniesScripts/GameManager\");\nconst
    Genies_Experience_CloudSave_1 = require(\"Genies.Experience.CloudSave\");\nconst
    TimeManager_1 = require(\"@assets/Experience/GeniesScripts/TimeManager\");\nconst
    DanceUpManager_1 = require(\"@assets/Experience/GeniesScripts/DanceUpManager\");\nclass
    CanvasController extends UnityEngine_1.MonoBehaviour {\n    constructor() {\n       
    super(...arguments);\n        this.canUpdateUI = false;\n        this.personalStorageKey
    = \"PersonalStorageKey\";\n        this.mileHighScoreKey = \"mileHighScoreKey\";\n       
    this.personalString = \"Best: \";\n    }\n    Start() {\n        this.gameManager
    = GameManager_1.default.Instance;\n        this.gameManager.OnGameStateChange.addListener(this.CheckGameState,
    //@ts-ignore\n        this);\n        this.canUpdateUI = true;\n        //Add
    a listener to the ReplayButton click event\n        this.replayButton.onClick.AddListener(()
    => this.OnReplay());\n        //Initialize both high scores\n        this.InitializeHighScores();\n   
    }\n    CheckGameState(newState) {\n        switch (newState) {\n            case
    GameManager_1.GameState.LOADING:\n                this.OnLoading();\n               
    break;\n            case GameManager_1.GameState.GAME_PLAY:\n               
    console.log(\"JUEGO CARGADO\");\n                this.OnGamePlay();\n               
    break;\n            case GameManager_1.GameState.GAME_OVER:\n               
    this.OnGameOver();\n                break;\n            case GameManager_1.GameState.GAME_WIN:\n               
    this.OnGameWin();\n                break;\n        }\n    }\n    OnLoading()
    {\n        this.hudPanel.SetActive(false);\n        this.notificationPanel.SetActive(false);\n       
    this.loadingPanel.SetActive(true);\n        this.loadingEffect.SetActive(true);\n   
    }\n    OnGamePlay() {\n        this.canUpdateUI = true;\n        this.notificationPanel.SetActive(false);\n       
    this.loadingPanel.SetActive(false);\n        this.loadingEffect.SetActive(false);\n       
    this.hudPanel.SetActive(true);\n    }\n    OnGameOver() {\n        this.canUpdateUI
    = false;\n        this.notificationText.text = \"GAME OVER\";\n        this.notificationButtonText.text
    = \"REPLAY\";\n        this.loadingPanel.SetActive(false);\n        this.loadingEffect.SetActive(false);\n       
    this.notificationPanel.SetActive(true);\n    }\n    OnGameWin() {\n        this.canUpdateUI
    = false;\n        this.timeText.text = TimeManager_1.default.Instance.GetRemainingTimeText();\n       
    this.notificationText.text = \"WELL DONE\";\n        this.notificationButtonText.text
    = \"NEXT\";\n        this.notificationPanel.SetActive(true);\n        this.loadingEffect.SetActive(false);\n       
    this.loadingPanel.SetActive(false);\n        this.CheckHighScore(this.personalStorage,
    DanceUpManager_1.default.Instance.GetTowerDistance());\n    }\n    /** Set the
    game state back to replay the game. */\n    OnReplay() {\n        this.gameManager.ChangeGameState(GameManager_1.GameState.GAME_PLAY);\n   
    }\n    Update() {\n        if (this.canUpdateUI) {\n            this.timeText.text
    = TimeManager_1.default.Instance.GetRemainingTimeText();\n            this.multiplierText.text
    = DanceUpManager_1.default.Instance.GetDanceMultiplierText();\n            this.distanceText.text
    = DanceUpManager_1.default.Instance.GetTowerDistanceText();\n        }\n    }\n   
    /** Initialize and load both the personal and global high scores. */\n    InitializeHighScores()
    {\n        //Initialize Personal High Score\n        this.personalStorage = new
    Genies_Experience_CloudSave_1.CloudSaveStorage(this.personalStorageKey, false);\n       
    this.LoadHighScore(this.personalStorage, this.personalHighScoreText, this.personalString);\n   
    }\n    async LoadHighScore(storage, textObj, highScoreString) {\n        await
    $promise(storage.Load());\n        if (storage.Has(this.mileHighScoreKey)) {\n           
    let highScore = storage.GetInt(this.mileHighScoreKey);\n            textObj.text
    = highScoreString + highScore.toString() + \" mi\";\n        }\n        else
    {\n            storage.SetFloat(this.mileHighScoreKey, 0);\n            textObj.text
    = highScoreString + \"0 mi\";\n            await $promise(storage.Save());\n       
    }\n    }\n    async CheckHighScore(storage, newScore) {\n        await $promise(storage.Load());\n       
    if (storage.Has(this.mileHighScoreKey)) {\n            let highScore = storage.GetInt(this.mileHighScoreKey);\n           
    if (newScore > highScore) {\n                storage.SetInt(this.mileHighScoreKey,
    newScore);\n                await $promise(storage.Save());\n            }\n       
    }\n    }\n}\nexports.default = CanvasController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtZQUNwQyxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztZQUNyRCxPQUFPLENBQUMsSUFBSSxHQUFHLGVBQWUsR0FBRyxTQUFTLENBQUMsUUFBUSxFQUFFLEdBQUcsS0FBSztRQUNqRSxDQUFDO2FBQUk7WUFDRCxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLENBQUM7WUFDMUMsT0FBTyxDQUFDLElBQUksR0FBRyxlQUFlLEdBQUcsTUFBTTtZQUN2QyxNQUFLLFNBQUMsT0FBTyxDQUFDLElBQUksRUFBQyxDQUFDO1FBQ3hCO0lBQ0o7SUFFUSxLQUFLLENBQUMsY0FBYyxDQUFDLE9BQXlCLEVBQUUsUUFBWTtRQUNoRSxNQUFLLFNBQUMsT0FBTyxDQUFDLElBQUksRUFBQyxDQUFDO1FBQ3BCLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtZQUNwQyxJQUFJLFNBQVMsR0FBTyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztZQUN6RCxJQUFHLFFBQVEsR0FBRyxTQUFTLEVBQUU7Z0JBQ3JCLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLFFBQVEsQ0FBQztnQkFDL0MsTUFBSyxTQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUMsQ0FBQztZQUN4QjtRQUNKO0lBQ0o7Q0FDSjtBQXpJQSxtQ0F5SUEiLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbIkNhbnZhc0NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOltudWxsXX0=","ScriptHash":"3991a2330966e6e19a57b280b931c016","Specifier":"@assets/Experience/GeniesScripts/CanvasController","DefaultTypeName":"@assets/Experience/GeniesScripts/CanvasController.CanvasController","IsMonobehaviour":true,"IsScriptableObj":false,"InheritanceChain":["@assets/Experience/GeniesScripts/CanvasController.CanvasController","UnityEngine.MonoBehaviour","UnityEngine.Behaviour","UnityEngine.Component","UnityEngine.Object","@com.genies.scripting@1.11.0\\Runtime\\Typing\\index.d.System.Object"],"Properties":[{"Path":"notificationPanel","Name":"notificationPanel","TypeName":"UnityEngine.GameObject","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"Header","Args":["\"UI
    Object References\""]},{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Notification
    Panel","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"loadingPanel","Name":"loadingPanel","TypeName":"UnityEngine.GameObject","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Loading
    Panel","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"hudPanel","Name":"hudPanel","TypeName":"UnityEngine.GameObject","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Hud
    Panel","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"loadingEffect","Name":"loadingEffect","TypeName":"UnityEngine.GameObject","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Loading
    Effect","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"timeText","Name":"timeText","TypeName":"TMPro.TMP_Text","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Time
    Text","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"distanceText","Name":"distanceText","TypeName":"TMPro.TMP_Text","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Distance
    Text","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"multiplierText","Name":"multiplierText","TypeName":"TMPro.TMP_Text","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Multiplier
    Text","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"notificationText","Name":"notificationText","TypeName":"TMPro.TMP_Text","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Notification
    Text","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"notificationButtonText","Name":"notificationButtonText","TypeName":"TMPro.TMP_Text","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Notification
    Button Text","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"personalHighScoreText","Name":"personalHighScoreText","TypeName":"TMPro.TMP_Text","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Personal
    High Score Text","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"replayButton","Name":"replayButton","TypeName":"UnityEngine.UI.Button","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Replay
    Button","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null}],"SupportedUiEvents":"None","DisplayName":"CanvasController","name":"CanvasController","hideFlags":"NotEditable"}'
