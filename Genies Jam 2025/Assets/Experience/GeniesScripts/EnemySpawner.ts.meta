fileFormatVersion: 2
guid: 409fee7ed8c54894490c33f3f86f34ca
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: 11500000, guid: 22604dd76f55453daccee3ed9e7b94b5, type: 3}
  SerializedAsset: "{\"IsCompiled\":true,\"CompilerVersion\":\"2.0.63\",\"ReferencedSpecifiers\":[\"@assets/Experience/GeniesScripts/GameManager\",\"@assets/Experience/GeniesScripts/EnemyManager\",\"@assets/Experience/GeniesScripts/Enums/EnemyState\",\"@assets/Experience/GeniesScripts/PlayerController\",\"@assets/Experience/GeniesScripts/TowerManager\"],\"Source\":\"\\\"use
    strict\\\";\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true
    });\\nconst UnityEngine_1 = require(\\\"UnityEngine\\\");\\nconst GameManager_1
    = require(\\\"@assets/Experience/GeniesScripts/GameManager\\\");\\nclass EnemySpawner
    extends UnityEngine_1.MonoBehaviour {\\n    constructor() {\\n        super(...arguments);\\n       
    this.globalSpeed = 20;\\n        this.xRange = 3;\\n        this.enemySpawnDelay
    = 1;\\n        this.poolSize = 10;\\n        this.enemyQueue = [];\\n       
    this.enemyPool = [];\\n    }\\n    Start() {\\n        //Get GameManager singleton
    and add a listener to OnGameStateChange event\\n        this.gameManager = GameManager_1.default.Instance;\\n       
    this.gameManager.OnGameStateChange.addListener(this.CheckGameState, //@ts-ignore\\n       
    this);\\n        this.playerController.OnMoveStateChange.addListener(this.CheckMoveState,
    //@ts-ignore\\n        this);\\n        this.towerManager.OnHitTower.addListener(this.ReturnToPool,
    //@ts-ignore\\n        this);\\n        this.InitializePool(); // Inicializa
    el Object Pool\\n    }\\n    /** Manages the enemy logic when the game state
    changes. @param newState */\\n    CheckGameState(newState) {\\n        switch
    (newState) {\\n            case GameManager_1.GameState.GAME_PLAY:\\n               
    this.OnGamePlay();\\n                break;\\n        }\\n    }\\n    /** This
    will manage the enemies once the game starts. */\\n    OnGamePlay() {\\n       
    this.coroutine = this.StartCoroutine(this.SpawnEnemies());\\n    }\\n    *SpawnEnemies()
    {\\n        while (true) {\\n            yield new UnityEngine_1.WaitForSeconds(this.enemySpawnDelay);\\n           
    let enemy = this.GetPooledEnemy();\\n            if (enemy) {\\n               
    let x = UnityEngine_1.Mathf.Floor(// @ts-ignore\\n                UnityEngine_1.Random.Range_EBB7509C_H1075CF37(-this.xRange,
    this.xRange));\\n                enemy.InitialConfigEnemy(this.globalSpeed, x,
    this.transform.position.y);\\n                this.enemyQueue.push(enemy);\\n           
    }\\n        }\\n    }\\n    CheckMoveState(newState) {\\n        let peekFirstEnemy
    = this.enemyQueue[0];\\n        console.log(\\\"ESTADO ACTIVADO \\\" + newState);\\n       
    if (peekFirstEnemy.IsState(newState)) {\\n            let dequeuedEnemy = this.enemyQueue.shift();\\n           
    console.log(\\\"EL ESTADO COINCIDE HAY QUE MATARLO\\\");\\n            this.ReturnToPool(dequeuedEnemy);\\n       
    }\\n    }\\n    // \U0001F539 Inicializa el pool de enemigos al comenzar el juego\\n   
    InitializePool() {\\n        let enemyTypes = this.enemyPrefabs.length;\\n       
    let enemiesPerType = UnityEngine_1.Mathf.Floor(this.poolSize / enemyTypes);\\n       
    let extraEnemies = this.poolSize % enemyTypes; // Si no es divisible exacto,
    agrega extras\\n        for (let i = 0; i < enemyTypes; i++) {\\n           
    let count = enemiesPerType + (i < extraEnemies ? 1 : 0); // Distribuye extra
    si es necesario\\n            for (let j = 0; j < count; j++) {\\n               
    let enemyObj = UnityEngine_1.Object.Instantiate(this.enemyPrefabs[i]);\\n               
    let enemy = // @ts-ignore\\n                 enemyObj.GetComponent(\\\"@assets/Experience/GeniesScripts/EnemyManager.EnemyManager\\\");\\n               
    enemyObj.SetActive(false); // Lo desactiva hasta que sea necesario\\n               
    this.enemyPool.push(enemy);\\n            }\\n        }\\n        // Mezcla el
    pool para evitar que siempre salgan en el mismo orden\\n        this.ShufflePool();\\n   
    }\\n    // \U0001F539 Mezcla el pool para una mejor distribuci\xF3n aleatoria\\n   
    ShufflePool() {\\n        for (let i = this.enemyPool.length - 1; i > 0; i--)
    {\\n            let j = UnityEngine_1.Mathf.Floor(// @ts-ignore\\n           
    UnityEngine_1.Random.Range_EBB7509C_H2CFB2EE5(0, i + 1));\\n            [this.enemyPool[i],
    this.enemyPool[j]] = [this.enemyPool[j], this.enemyPool[i]];\\n        }\\n   
    }\\n    // \U0001F539 Obtiene un enemigo del pool (si hay disponibles) o retorna
    null si el pool est\xE1 vac\xEDo\\n    GetPooledEnemy() {\\n        if (this.enemyPool.length
    > 0) {\\n            let enemy = this.enemyPool.pop();\\n            enemy.gameObject.SetActive(true);\\n           
    return enemy;\\n        }\\n        return null;\\n    }\\n    // \U0001F539
    Devuelve un enemigo al pool en lugar de destruirlo\\n    ReturnToPool(enemy)
    {\\n        enemy.gameObject.SetActive(false);\\n        this.enemyPool.push(enemy);\\n   
    }\\n}\\nexports.default = EnemySpawner;\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN6QyxJQUFJLEtBQUssR0FBVyxjQUFjLEdBQUcsQ0FBQyxDQUFDLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsbUNBQWtDO1lBRW5HLEtBQUssSUFBSSxDQUFDLEdBQVUsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBRW5DLElBQUksUUFBUSxHQUFHLG9CQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQWU7Z0JBQ3JFLElBQUksS0FBSyxHQUFFO2lCQUFDLFFBQVEsQ0FBQyxZQUFXLDZEQUFhLENBQUk7Z0JBRWpELFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBRSx1Q0FBc0M7Z0JBQ2xFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUM5QjtRQUNKO1FBRUEsa0VBQWlFO1FBQ2pFLElBQUksQ0FBQyxXQUFXLEVBQUU7SUFDdEI7SUFFQSwwREFBeUQ7SUFDakQsV0FBVztRQUNmLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDaEQsSUFBSSxDQUFDLEdBQUcsbUJBQUssQ0FBQyxLQUFLO1lBQUMsb0JBQU0sQ0FBQyx3QkFBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDM0MsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuRjtJQUNKO0lBRUEsMkZBQTBGO0lBQ2xGLGNBQWM7UUFDbEIsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDM0IsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDaEMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDO1lBQ2hDLE9BQU8sS0FBSztRQUNoQjtRQUNBLE9BQU8sSUFBSTtJQUNmO0lBRUEsd0RBQXVEO0lBQy9DLFlBQVksQ0FBQyxLQUFtQjtRQUNwQyxLQUFLLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUM7UUFDakMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQzlCO0NBQ0o7QUFuSEEsK0JBbUhBIiwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJFbmVteVNwYXduZXIudHMiXSwic291cmNlc0NvbnRlbnQiOltudWxsXX0=\",\"ScriptHash\":\"c2a03979b56d1a77f4cff769b3586d9d\",\"Specifier\":\"@assets/Experience/GeniesScripts/EnemySpawner\",\"DefaultTypeName\":\"@assets/Experience/GeniesScripts/EnemySpawner.EnemySpawner\",\"IsMonobehaviour\":true,\"IsScriptableObj\":false,\"InheritanceChain\":[\"@assets/Experience/GeniesScripts/EnemySpawner.EnemySpawner\",\"UnityEngine.MonoBehaviour\",\"UnityEngine.Behaviour\",\"UnityEngine.Component\",\"UnityEngine.Object\",\"@com.genies.scripting@1.11.0\\\\Runtime\\\\Typing\\\\index.d.System.Object\"],\"Properties\":[{\"Path\":\"playerController\",\"Name\":\"playerController\",\"TypeName\":\"@assets/Experience/GeniesScripts/PlayerController.PlayerController\",\"AssemblyName\":null,\"EnumKeys\":[],\"EnumValues\":[],\"IsGeniesBehaviourRef\":true,\"IsGeniesScriptableObjectRef\":false,\"Decorators\":[{\"Type\":\"SerializeField\",\"Args\":[]}],\"Initializers\":[],\"ArrayDimension\":-1,\"IsArray\":false,\"IsEnum\":false,\"ArrayElementInitializer\":null,\"ChildProperties\":[],\"PrettyName\":\"Player
    Controller\",\"_arrayElementInitializerJson\":null,\"_childPropertiesJson\":\"[]\",\"_prettyName\":null},{\"Path\":\"towerManager\",\"Name\":\"towerManager\",\"TypeName\":\"@assets/Experience/GeniesScripts/TowerManager.TowerManager\",\"AssemblyName\":null,\"EnumKeys\":[],\"EnumValues\":[],\"IsGeniesBehaviourRef\":true,\"IsGeniesScriptableObjectRef\":false,\"Decorators\":[{\"Type\":\"SerializeField\",\"Args\":[]}],\"Initializers\":[],\"ArrayDimension\":-1,\"IsArray\":false,\"IsEnum\":false,\"ArrayElementInitializer\":null,\"ChildProperties\":[],\"PrettyName\":\"Tower
    Manager\",\"_arrayElementInitializerJson\":null,\"_childPropertiesJson\":\"[]\",\"_prettyName\":null},{\"Path\":\"enemyPrefabs\",\"Name\":\"enemyPrefabs\",\"TypeName\":\"UnityEngine.GameObject\",\"AssemblyName\":null,\"EnumKeys\":[],\"EnumValues\":[],\"IsGeniesBehaviourRef\":false,\"IsGeniesScriptableObjectRef\":false,\"Decorators\":[{\"Type\":\"Header\",\"Args\":[\"\\\"Enemies
    Spawner Settings\\\"\"]},{\"Type\":\"SerializeField\",\"Args\":[]}],\"Initializers\":[],\"ArrayDimension\":1,\"IsArray\":true,\"IsEnum\":false,\"ArrayElementInitializer\":{\"Path\":\"enemyPrefabs_D1\",\"Name\":\"enemyPrefabs\",\"TypeName\":\"UnityEngine.GameObject\",\"AssemblyName\":null,\"EnumKeys\":[],\"EnumValues\":[],\"IsGeniesBehaviourRef\":false,\"IsGeniesScriptableObjectRef\":false,\"Decorators\":[],\"Initializers\":[],\"ArrayDimension\":1,\"IsArray\":false,\"IsEnum\":false,\"ArrayElementInitializer\":null,\"ChildProperties\":[],\"PrettyName\":\"Enemy
    Prefabs\",\"_arrayElementInitializerJson\":null,\"_childPropertiesJson\":\"[]\",\"_prettyName\":null},\"ChildProperties\":[],\"PrettyName\":\"Enemy
    Prefabs\",\"_arrayElementInitializerJson\":\"{\\\"Path\\\":\\\"enemyPrefabs_D1\\\",\\\"Name\\\":\\\"enemyPrefabs\\\",\\\"TypeName\\\":\\\"UnityEngine.GameObject\\\",\\\"AssemblyName\\\":null,\\\"EnumKeys\\\":[],\\\"EnumValues\\\":[],\\\"IsGeniesBehaviourRef\\\":false,\\\"IsGeniesScriptableObjectRef\\\":false,\\\"Decorators\\\":[],\\\"Initializers\\\":[],\\\"ArrayDimension\\\":1,\\\"IsArray\\\":false,\\\"IsEnum\\\":false,\\\"ArrayElementInitializer\\\":null,\\\"ChildProperties\\\":[],\\\"PrettyName\\\":\\\"Enemy
    Prefabs\\\",\\\"_arrayElementInitializerJson\\\":null,\\\"_childPropertiesJson\\\":\\\"[]\\\",\\\"_prettyName\\\":null}\",\"_childPropertiesJson\":\"[]\",\"_prettyName\":null},{\"Path\":\"globalSpeed\",\"Name\":\"globalSpeed\",\"TypeName\":\"System.Single\",\"AssemblyName\":null,\"EnumKeys\":[],\"EnumValues\":[],\"IsGeniesBehaviourRef\":false,\"IsGeniesScriptableObjectRef\":false,\"Decorators\":[{\"Type\":\"SerializeField\",\"Args\":[]}],\"Initializers\":[\"20\"],\"ArrayDimension\":-1,\"IsArray\":false,\"IsEnum\":false,\"ArrayElementInitializer\":null,\"ChildProperties\":[],\"PrettyName\":\"Global
    Speed\",\"_arrayElementInitializerJson\":null,\"_childPropertiesJson\":\"[]\",\"_prettyName\":null},{\"Path\":\"xRange\",\"Name\":\"xRange\",\"TypeName\":\"System.Single\",\"AssemblyName\":null,\"EnumKeys\":[],\"EnumValues\":[],\"IsGeniesBehaviourRef\":false,\"IsGeniesScriptableObjectRef\":false,\"Decorators\":[{\"Type\":\"SerializeField\",\"Args\":[]}],\"Initializers\":[\"3\"],\"ArrayDimension\":-1,\"IsArray\":false,\"IsEnum\":false,\"ArrayElementInitializer\":null,\"ChildProperties\":[],\"PrettyName\":\"X
    Range\",\"_arrayElementInitializerJson\":null,\"_childPropertiesJson\":\"[]\",\"_prettyName\":null},{\"Path\":\"enemySpawnDelay\",\"Name\":\"enemySpawnDelay\",\"TypeName\":\"System.Single\",\"AssemblyName\":null,\"EnumKeys\":[],\"EnumValues\":[],\"IsGeniesBehaviourRef\":false,\"IsGeniesScriptableObjectRef\":false,\"Decorators\":[{\"Type\":\"SerializeField\",\"Args\":[]}],\"Initializers\":[\"1\"],\"ArrayDimension\":-1,\"IsArray\":false,\"IsEnum\":false,\"ArrayElementInitializer\":null,\"ChildProperties\":[],\"PrettyName\":\"Enemy
    Spawn Delay\",\"_arrayElementInitializerJson\":null,\"_childPropertiesJson\":\"[]\",\"_prettyName\":null},{\"Path\":\"poolSize\",\"Name\":\"poolSize\",\"TypeName\":\"System.Int32\",\"AssemblyName\":null,\"EnumKeys\":[],\"EnumValues\":[],\"IsGeniesBehaviourRef\":false,\"IsGeniesScriptableObjectRef\":false,\"Decorators\":[{\"Type\":\"SerializeField\",\"Args\":[]}],\"Initializers\":[\"10\"],\"ArrayDimension\":-1,\"IsArray\":false,\"IsEnum\":false,\"ArrayElementInitializer\":null,\"ChildProperties\":[],\"PrettyName\":\"Pool
    Size\",\"_arrayElementInitializerJson\":null,\"_childPropertiesJson\":\"[]\",\"_prettyName\":null}],\"SupportedUiEvents\":\"None\",\"DisplayName\":\"EnemySpawner\",\"name\":\"EnemySpawner\",\"hideFlags\":\"NotEditable\"}"
